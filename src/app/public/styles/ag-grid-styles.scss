@import '~@skyux/theme/scss/mixins';
@import '~@skyux/theme/scss/_compat/mixins';

/* base grid theme property variables */
$odd-row-background-color: $sky-background-color-page-default !default;
$background-color: $sky-color-gray-01 !default;
$border-color: $sky-border-color-neutral-medium !default;
$row-height: 38px !default;
$header-height: 38px !default;
$font-family: $sky-font-family !default;
$foreground-color: $sky-text-color-default !default;
$header-background-color: $sky-background-color-page-default !default;
$header-foreground-color: $sky-text-color-deemphasized !default;
$font-size: 15px !default;
$row-border-width: 1px !default;
$secondary-font-size: $sky-font-size-base !default;
$secondary-font-weight: 400 !default;
$secondary-foreground-color: $sky-text-color-deemphasized !default;
$primary-color: $sky-highlight-color-info !default;
$selected-color: $sky-background-color-selected !default;
$hover-color: darken($sky-background-color-selected, 10%) !default;

/* other variables */
$sky-standard-border: 1px solid $border-color !default;

@import "~ag-grid-community/src/styles/ag-grid.scss";
@import "~ag-grid-community/src/styles/ag-theme-balham/sass/ag-theme-balham.scss";

ag-grid-angular {
  @extend .ag-theme-balham;

  border-top: $sky-standard-border;

  .ag-root {
    border: none;
  }

  // ag grid renders a small column header divider that we don't want shown
  .ag-header-cell::after {
    display: none;
  }

  .ag-header-cell {
    border-right: $sky-standard-border;
  }

  .ag-row {
    // don't shorthand these because it will overwrite the other grid border settings
    border-color: $border-color;
    border-style: dotted;
  }

  .ag-row-selected:hover {
    background-color: $hover-color;
  }

  .sky-ag-grid-cell-number {
    text-align: right;
    padding-right: 12px;
  }

  .sky-ag-grid-cell-autocomplete {
    padding-left: 12px;
  }
}

ag-grid-angular.sky-ag-grid-editable {

  border: $sky-standard-border;

  .ag-row {
    border-style: solid;
  }

  .ag-cell {
    border-right: $sky-standard-border;
    border-block-end: none;
    border-block-start: none;
  }

  .sky-ag-grid-cell-editable {
    background-color: $sky-background-color-page-default;
  }

  .sky-ag-grid-cell-uneditable {
    background-color: $sky-background-color-neutral-light;
  }

  .ag-popup > div {
    box-shadow: none;
  }

  /* fine tune focus cell borders */
  .ag-row {
    .ag-cell-focus {
      line-height: $row-height - ($row-border-width * 4);
    }

    .ag-cell-focus.ag-cell-inline-editing {
      height: $row-height - 1;
      border-radius: 0;
      @include sky-field-status(active)
    }
  }

  .ag-row.ag-row-first {
    // ag-grid sets the height on the element and the first row does not have a border, we must adjust the row height to account for that.
    height: $row-height - 1 !important;
  }

  .ag-row:not(.ag-row-first) {
    margin-top: -1px;
  }

  .ag-popup-editor {
    border: none;
  }

  sky-ag-grid-cell-editor-datepicker {
    button:focus {
      outline: -webkit-focus-ring-color auto 5px;
    }

    sky-daypicker:focus {
      outline: -webkit-focus-ring-color auto 5px;
    }
  }
}

sky-toolbar + ag-grid-angular {
  border-top: none;
}
